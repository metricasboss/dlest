"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[5729],{3848(e,n,s){s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"guides/puppeteer-replay","title":"Puppeteer Replay Support","description":"Generate DLest tests from Puppeteer Replay recordings","source":"@site/docs/guides/puppeteer-replay.md","sourceDirName":"guides","slug":"/guides/puppeteer-replay","permalink":"/dlest/guides/puppeteer-replay","draft":false,"unlisted":false,"editUrl":"https://github.com/metricasboss/dlest/tree/main/website/docs/guides/puppeteer-replay.md","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"sidebar_position":7,"title":"Puppeteer Replay Support","description":"Generate DLest tests from Puppeteer Replay recordings"},"sidebar":"tutorialSidebar","previous":{"title":"Writing Tests","permalink":"/dlest/guides/writing-tests"},"next":{"title":"Puppeteer Replay (PT-BR)","permalink":"/dlest/guides/puppeteer-replay-pt-br"}}');var t=s(4848),o=s(8453);const i={sidebar_position:7,title:"Puppeteer Replay Support",description:"Generate DLest tests from Puppeteer Replay recordings"},a="Puppeteer Replay Support",d={},l=[{value:"\ud83d\udccb Vis\xe3o Geral",id:"-vis\xe3o-geral",level:2},{value:"Formatos Suportados",id:"formatos-suportados",level:3},{value:"\ud83d\ude80 Quick Start",id:"-quick-start",level:2},{value:"1. Criar Recording no Chrome DevTools",id:"1-criar-recording-no-chrome-devtools",level:3},{value:"2. Gerar Teste DLest",id:"2-gerar-teste-dlest",level:3},{value:"3. Executar Teste",id:"3-executar-teste",level:3},{value:"\ud83c\udfaf Detec\xe7\xe3o Autom\xe1tica de Formato",id:"-detec\xe7\xe3o-autom\xe1tica-de-formato",level:2},{value:"Como Funciona",id:"como-funciona",level:3},{value:"N\xedveis de Confian\xe7a",id:"n\xedveis-de-confian\xe7a",level:3},{value:"\ud83d\udcca Diferen\xe7as entre Formatos",id:"-diferen\xe7as-entre-formatos",level:2},{value:"Estrutura de Seletores",id:"estrutura-de-seletores",level:3},{value:"Tipos de Steps",id:"tipos-de-steps",level:3},{value:"Viewport Settings",id:"viewport-settings",level:3},{value:"\ud83c\udfa8 Convers\xf5es Autom\xe1ticas",id:"-convers\xf5es-autom\xe1ticas",level:2},{value:"Change \u2192 Fill",id:"change--fill",level:3},{value:"DoubleClick \u2192 Dblclick",id:"doubleclick--dblclick",level:3},{value:"WaitForExpression \u2192 TODO",id:"waitforexpression--todo",level:3},{value:"\ud83d\udca1 Detec\xe7\xe3o de Analytics Events",id:"-detec\xe7\xe3o-de-analytics-events",level:2},{value:"E-commerce Events",id:"e-commerce-events",level:3},{value:"Form Events",id:"form-events",level:3},{value:"Navigation Events",id:"navigation-events",level:3},{value:"\ud83d\udcd6 Exemplos Completos",id:"-exemplos-completos",level:2},{value:"Exemplo 1: E-commerce Add to Cart",id:"exemplo-1-e-commerce-add-to-cart",level:3},{value:"Exemplo 2: Form Submission",id:"exemplo-2-form-submission",level:3},{value:"\ud83d\udee0\ufe0f Op\xe7\xf5es Avan\xe7adas",id:"\ufe0f-op\xe7\xf5es-avan\xe7adas",level:2},{value:"Template Selection",id:"template-selection",level:3},{value:"Min Confidence Level",id:"min-confidence-level",level:3},{value:"Custom Test Name",id:"custom-test-name",level:3},{value:"Disable Comments/TODOs",id:"disable-commentstodos",level:3},{value:"\ud83d\udd0d Debugging",id:"-debugging",level:2},{value:"Verbose Mode",id:"verbose-mode",level:3},{value:"An\xe1lise Detalhada de Formato",id:"an\xe1lise-detalhada-de-formato",level:3},{value:"\u26a1 Performance",id:"-performance",level:2},{value:"\ud83d\udd12 Limita\xe7\xf5es e Considera\xe7\xf5es",id:"-limita\xe7\xf5es-e-considera\xe7\xf5es",level:2},{value:"Steps N\xe3o Suportados",id:"steps-n\xe3o-suportados",level:3},{value:"Recommendations",id:"recommendations",level:3},{value:"\ud83c\udd98 Troubleshooting",id:"-troubleshooting",level:2},{value:"&quot;Failed to detect recording format&quot;",id:"failed-to-detect-recording-format",level:3},{value:"&quot;Recording must contain at least one step&quot;",id:"recording-must-contain-at-least-one-step",level:3},{value:"Events n\xe3o detectados corretamente",id:"events-n\xe3o-detectados-corretamente",level:3},{value:"Seletores quebrando",id:"seletores-quebrando",level:3},{value:"\ud83d\udcda Recursos Adicionais",id:"-recursos-adicionais",level:2},{value:"\ud83e\udd1d Contribuindo",id:"-contribuindo",level:2},{value:"\ud83d\udcdd Changelog",id:"-changelog",level:2},{value:"v0.6.0 (Unreleased)",id:"v060-unreleased",level:3}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"puppeteer-replay-support",children:"Puppeteer Replay Support"})}),"\n",(0,t.jsxs)(n.p,{children:["DLest agora suporta arquivos JSON do ",(0,t.jsx)(n.strong,{children:"Puppeteer Replay"})," em adi\xe7\xe3o ao Chrome DevTools Recorder, permitindo que voc\xea crie testes de analytics a partir de grava\xe7\xf5es do Puppeteer."]}),"\n",(0,t.jsx)(n.h2,{id:"-vis\xe3o-geral",children:"\ud83d\udccb Vis\xe3o Geral"}),"\n",(0,t.jsxs)(n.p,{children:["O comando ",(0,t.jsx)(n.code,{children:"dlest generate"})," detecta automaticamente o formato do seu recording (Chrome DevTools Recorder ou Puppeteer Replay) e gera testes DLest com as mesmas capacidades de detec\xe7\xe3o inteligente de eventos analytics."]}),"\n",(0,t.jsx)(n.h3,{id:"formatos-suportados",children:"Formatos Suportados"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Formato"}),(0,t.jsx)(n.th,{children:"Descri\xe7\xe3o"}),(0,t.jsx)(n.th,{children:"Suporte"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Chrome DevTools Recorder"})}),(0,t.jsx)(n.td,{children:"JSON exportado do Chrome DevTools"}),(0,t.jsx)(n.td,{children:"\u2705 Completo"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Puppeteer Replay"})}),(0,t.jsx)(n.td,{children:"JSON do formato Puppeteer Replay"}),(0,t.jsx)(n.td,{children:"\u2705 Completo"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"-quick-start",children:"\ud83d\ude80 Quick Start"}),"\n",(0,t.jsx)(n.h3,{id:"1-criar-recording-no-chrome-devtools",children:"1. Criar Recording no Chrome DevTools"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# 1. Abra o Chrome DevTools (F12)\n# 2. V\xe1 para a aba "Recorder"\n# 3. Clique em "Create a new recording"\n# 4. Nomeie sua grava\xe7\xe3o (ex: "Add to Cart Flow")\n# 5. Clique em "Start recording"\n# 6. Execute as a\xe7\xf5es que deseja testar\n# 7. Clique em "End recording"\n# 8. Exporte como JSON (pode ser Chrome ou Puppeteer format)\n'})}),"\n",(0,t.jsx)(n.h3,{id:"2-gerar-teste-dlest",children:"2. Gerar Teste DLest"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Preview do teste (sem criar arquivo)\nnpx dlest generate --from-recording recording.json --preview\n\n# Gerar arquivo de teste\nnpx dlest generate --from-recording recording.json --output tests/my-flow.test.js\n\n# Usar template espec\xedfico para melhor detec\xe7\xe3o\nnpx dlest generate --from-recording recording.json --template ecommerce\n"})}),"\n",(0,t.jsx)(n.h3,{id:"3-executar-teste",children:"3. Executar Teste"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npx dlest tests/my-flow.test.js\n"})}),"\n",(0,t.jsx)(n.h2,{id:"-detec\xe7\xe3o-autom\xe1tica-de-formato",children:"\ud83c\udfaf Detec\xe7\xe3o Autom\xe1tica de Formato"}),"\n",(0,t.jsx)(n.p,{children:"O DLest detecta automaticamente qual formato voc\xea est\xe1 usando:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npx dlest generate --from-recording recording.json --preview\n"})}),"\n",(0,t.jsx)(n.p,{children:"Output:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\ud83d\udcd6 Reading recording from: recording.json\n\ud83d\udccb Detected format: puppeteer-replay (confidence: high)\n\u2705 Parsed 5 steps from recording\n"})}),"\n",(0,t.jsx)(n.h3,{id:"como-funciona",children:"Como Funciona"}),"\n",(0,t.jsx)(n.p,{children:"O detector analisa:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Estrutura de seletores"}),": Chrome usa arrays aninhados ",(0,t.jsx)(n.code,{children:'[["selector"]]'}),", Puppeteer usa arrays simples ",(0,t.jsx)(n.code,{children:'["selector"]'})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Tipos de steps"}),": Puppeteer tem tipos espec\xedficos como ",(0,t.jsx)(n.code,{children:"change"}),", ",(0,t.jsx)(n.code,{children:"doubleClick"}),", ",(0,t.jsx)(n.code,{children:"waitForExpression"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Campos de viewport"}),": Puppeteer inclui ",(0,t.jsx)(n.code,{children:"deviceScaleFactor"}),", ",(0,t.jsx)(n.code,{children:"isMobile"}),", etc."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"assertedEvents"}),": Espec\xedfico do Chrome Recorder"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"n\xedveis-de-confian\xe7a",children:"N\xedveis de Confian\xe7a"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"High"}),": Identifica\xe7\xe3o clara e inequ\xedvoca do formato"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Medium"}),": Forte indica\xe7\xe3o mas n\xe3o 100% certa"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Low"}),": Formato amb\xedguo, usa Chrome Recorder como padr\xe3o"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"-diferen\xe7as-entre-formatos",children:"\ud83d\udcca Diferen\xe7as entre Formatos"}),"\n",(0,t.jsx)(n.h3,{id:"estrutura-de-seletores",children:"Estrutura de Seletores"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Chrome DevTools Recorder:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "type": "click",\n  "selectors": [\n    ["#button"],\n    [".btn"],\n    ["button"]\n  ]\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Puppeteer Replay:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "type": "click",\n  "selectors": ["#button", ".btn", "button"]\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Resultado no DLest:"})," Ambos s\xe3o normalizados internamente e geram o mesmo teste."]}),"\n",(0,t.jsx)(n.h3,{id:"tipos-de-steps",children:"Tipos de Steps"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Step Type"}),(0,t.jsx)(n.th,{children:"Chrome Recorder"}),(0,t.jsx)(n.th,{children:"Puppeteer Replay"}),(0,t.jsx)(n.th,{children:"DLest Output"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Input change"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"fill"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"change"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"page.fill()"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Double-click"}),(0,t.jsx)(n.td,{children:"\u274c N\xe3o suportado"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"doubleClick"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"page.dblclick()"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Viewport"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"setViewport"})}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"setViewport"})," + extras"]}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"page.setViewportSize()"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Wait expression"}),(0,t.jsx)(n.td,{children:"\u274c"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"waitForExpression"})}),(0,t.jsx)(n.td,{children:"TODO comment"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Browser close"}),(0,t.jsx)(n.td,{children:"\u274c"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"close"})}),(0,t.jsx)(n.td,{children:"Ignorado"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"viewport-settings",children:"Viewport Settings"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Chrome DevTools Recorder:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "type": "setViewport",\n  "width": 1280,\n  "height": 720\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Puppeteer Replay:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "type": "setViewport",\n  "width": 1280,\n  "height": 720,\n  "deviceScaleFactor": 2,\n  "isMobile": false,\n  "hasTouch": false,\n  "isLandscape": false\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"DLest"}),": Usa apenas ",(0,t.jsx)(n.code,{children:"width"})," e ",(0,t.jsx)(n.code,{children:"height"}),", mas adiciona coment\xe1rio sobre campos extras."]}),"\n",(0,t.jsx)(n.h2,{id:"-convers\xf5es-autom\xe1ticas",children:"\ud83c\udfa8 Convers\xf5es Autom\xe1ticas"}),"\n",(0,t.jsx)(n.h3,{id:"change--fill",children:"Change \u2192 Fill"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'// Input Puppeteer\n{\n  "type": "change",\n  "selectors": ["#email"],\n  "value": "user@example.com"\n}\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"// Output DLest\nawait page.fill('#email', 'user@example.com');\n"})}),"\n",(0,t.jsx)(n.h3,{id:"doubleclick--dblclick",children:"DoubleClick \u2192 Dblclick"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'// Input Puppeteer\n{\n  "type": "doubleClick",\n  "selectors": ["#element"]\n}\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"// Output DLest\nawait page.dblclick('#element');\n// Double-click action\n"})}),"\n",(0,t.jsx)(n.h3,{id:"waitforexpression--todo",children:"WaitForExpression \u2192 TODO"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'// Input Puppeteer\n{\n  "type": "waitForExpression",\n  "expression": "window.dataLayer.length > 0"\n}\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"// Output DLest\n// TODO: Implement waitForExpression - window.dataLayer.length > 0\n// Puppeteer waitForExpression needs manual conversion\n"})}),"\n",(0,t.jsx)(n.h2,{id:"-detec\xe7\xe3o-de-analytics-events",children:"\ud83d\udca1 Detec\xe7\xe3o de Analytics Events"}),"\n",(0,t.jsxs)(n.p,{children:["A detec\xe7\xe3o de eventos analytics funciona ",(0,t.jsx)(n.strong,{children:"identicamente"})," para ambos os formatos:"]}),"\n",(0,t.jsx)(n.h3,{id:"e-commerce-events",children:"E-commerce Events"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"// Detectado automaticamente de seletores\nawait page.click('[data-testid=\"add-to-cart\"]');\n// \u2193\nexpect(dataLayer).toHaveEvent('add_to_cart', {\n  currency: expect.any(String),\n  value: expect.any(Number),\n  items: expect.arrayContaining([...])\n});\n"})}),"\n",(0,t.jsx)(n.h3,{id:"form-events",children:"Form Events"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"// Detectado de form fills\nawait page.fill('#email', 'user@example.com');\n// \u2193\nexpect(dataLayer).toHaveEvent('form_interaction', {\n  form_field: '#email',\n  interaction_type: 'fill'\n});\n"})}),"\n",(0,t.jsx)(n.h3,{id:"navigation-events",children:"Navigation Events"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"// Detectado em todas as navega\xe7\xf5es\nawait page.goto('https://example.com/product/123');\n// \u2193\nexpect(dataLayer).toHaveEvent('page_view', {\n  page_location: expect.any(String),\n  page_title: expect.any(String)\n});\n"})}),"\n",(0,t.jsx)(n.h2,{id:"-exemplos-completos",children:"\ud83d\udcd6 Exemplos Completos"}),"\n",(0,t.jsx)(n.h3,{id:"exemplo-1-e-commerce-add-to-cart",children:"Exemplo 1: E-commerce Add to Cart"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Recording (Puppeteer Replay):"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "title": "E-commerce Add to Cart",\n  "steps": [\n    {\n      "type": "navigate",\n      "url": "https://shop.example.com/product/123"\n    },\n    {\n      "type": "click",\n      "selectors": ["[data-testid=\'add-to-cart\']", ".add-btn"]\n    },\n    {\n      "type": "change",\n      "selectors": ["#quantity"],\n      "value": "2"\n    },\n    {\n      "type": "click",\n      "selectors": ["#checkout"]\n    }\n  ]\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Comando:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npx dlest generate \\\n  --from-recording ecommerce.json \\\n  --template ecommerce \\\n  --output tests/add-to-cart.test.js\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Teste Gerado:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"const { test, expect } = require('dlest');\n\ntest.describe('E-commerce Add to Cart', () => {\n  test('Generated from Recording', async ({ page, dataLayer }) => {\n    // Navigate to product\n    await page.goto('https://shop.example.com/product/123');\n    await page.waitForTimeout(100);\n    expect(dataLayer).toHaveEvent('page_view');\n    expect(dataLayer).toHaveEvent('view_item', {\n      currency: expect.any(String),\n      value: expect.any(Number),\n      items: expect.any(Array)\n    });\n\n    // Add to cart\n    await page.click('[data-testid='add-to-cart']');\n    await page.waitForTimeout(100);\n    expect(dataLayer).toHaveEvent('add_to_cart', {\n      currency: expect.any(String),\n      value: expect.any(Number),\n      items: expect.arrayContaining([...])\n    });\n\n    // Change quantity\n    await page.fill('#quantity', '2');\n    await page.waitForTimeout(100);\n    expect(dataLayer).toHaveEvent('form_interaction');\n\n    // Checkout\n    await page.click('#checkout');\n    await page.waitForTimeout(100);\n    expect(dataLayer).toHaveEvent('begin_checkout');\n  });\n});\n"})}),"\n",(0,t.jsx)(n.h3,{id:"exemplo-2-form-submission",children:"Exemplo 2: Form Submission"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Recording (Puppeteer Replay):"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "title": "Contact Form",\n  "steps": [\n    {\n      "type": "navigate",\n      "url": "https://example.com/contact"\n    },\n    {\n      "type": "change",\n      "selectors": ["#name"],\n      "value": "John Doe"\n    },\n    {\n      "type": "change",\n      "selectors": ["#email"],\n      "value": "john@example.com"\n    },\n    {\n      "type": "click",\n      "selectors": ["[data-testid=\'submit\']"]\n    }\n  ]\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Comando:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npx dlest generate --from-recording contact-form.json --preview\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Preview Output:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'\ud83d\udccb Test Generation Preview\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nTitle: Contact Form\nSteps: 4\nEvents: 4\nJourney: form (high)\nTemplate: auto\nFilename: contact-form-2026-02-02.test.js\n\n\ud83d\udcdd Steps Overview:\n   1. Navigate to https://example.com/contact \u2192 page_view\n   2. Fill #name with "John Doe" \u2192 form_interaction\n   3. Fill #email with "john@example.com" \u2192 form_interaction\n   4. Click [data-testid=\'submit\'] \u2192 form_submit\n'})}),"\n",(0,t.jsx)(n.h2,{id:"\ufe0f-op\xe7\xf5es-avan\xe7adas",children:"\ud83d\udee0\ufe0f Op\xe7\xf5es Avan\xe7adas"}),"\n",(0,t.jsx)(n.h3,{id:"template-selection",children:"Template Selection"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Auto-detect template baseado no journey\nnpx dlest generate --from-recording recording.json\n\n# Force specific template\nnpx dlest generate --from-recording recording.json --template ecommerce\nnpx dlest generate --from-recording recording.json --template form\nnpx dlest generate --from-recording recording.json --template basic\n"})}),"\n",(0,t.jsx)(n.h3,{id:"min-confidence-level",children:"Min Confidence Level"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Include apenas eventos com confian\xe7a high\nnpx dlest generate --from-recording recording.json --min-confidence high\n\n# Include eventos medium e high\nnpx dlest generate --from-recording recording.json --min-confidence medium\n\n# Include todos os eventos (padr\xe3o)\nnpx dlest generate --from-recording recording.json --min-confidence low\n"})}),"\n",(0,t.jsx)(n.h3,{id:"custom-test-name",children:"Custom Test Name"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'npx dlest generate \\\n  --from-recording recording.json \\\n  --test-name "My Custom Test Name"\n'})}),"\n",(0,t.jsx)(n.h3,{id:"disable-commentstodos",children:"Disable Comments/TODOs"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Gerar sem coment\xe1rios\nnpx dlest generate --from-recording recording.json --no-comments\n\n# Gerar sem TODOs\nnpx dlest generate --from-recording recording.json --no-todos\n"})}),"\n",(0,t.jsx)(n.h2,{id:"-debugging",children:"\ud83d\udd0d Debugging"}),"\n",(0,t.jsx)(n.h3,{id:"verbose-mode",children:"Verbose Mode"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npx dlest generate --from-recording recording.json --verbose\n"})}),"\n",(0,t.jsx)(n.p,{children:"Mostra:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Formato detectado com detalhes"}),"\n",(0,t.jsx)(n.li,{children:"Cada step processado"}),"\n",(0,t.jsx)(n.li,{children:"Analytics events identificados"}),"\n",(0,t.jsx)(n.li,{children:"Confian\xe7a de cada detec\xe7\xe3o"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"an\xe1lise-detalhada-de-formato",children:"An\xe1lise Detalhada de Formato"}),"\n",(0,t.jsx)(n.p,{children:"Voc\xea pode usar a API do FormatDetector diretamente:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"const { FormatDetector } = require('dlest/src/recorder/format-detector');\nconst recording = require('./recording.json');\n\nconst analysis = FormatDetector.analyzeDetailed(recording);\nconsole.log(analysis);\n"})}),"\n",(0,t.jsx)(n.p,{children:"Output:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"{\n  format: 'puppeteer-replay',\n  confidence: 'high',\n  indicators: {\n    chromeRecorder: 1,\n    puppeteerReplay: 5,\n    neutral: 0\n  },\n  selectorFormat: 'simple-array',\n  stepsCount: 5,\n  stepTypes: ['navigate', 'click', 'change', 'doubleClick']\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"-performance",children:"\u26a1 Performance"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Format Detection"}),": < 1ms"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Parsing"}),": ~10-20ms por recording"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Generation"}),": ~50-100ms para teste completo"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Zero overhead"}),": Detec\xe7\xe3o n\xe3o impacta gera\xe7\xe3o"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"-limita\xe7\xf5es-e-considera\xe7\xf5es",children:"\ud83d\udd12 Limita\xe7\xf5es e Considera\xe7\xf5es"}),"\n",(0,t.jsx)(n.h3,{id:"steps-n\xe3o-suportados",children:"Steps N\xe3o Suportados"}),"\n",(0,t.jsx)(n.p,{children:"Alguns steps do Puppeteer Replay n\xe3o t\xeam equivalente direto:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Step"}),(0,t.jsx)(n.th,{children:"Status"}),(0,t.jsx)(n.th,{children:"Resultado"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"waitForExpression"})}),(0,t.jsx)(n.td,{children:"\u26a0\ufe0f Parcial"}),(0,t.jsx)(n.td,{children:"Gera TODO comment"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"emulateNetworkConditions"})}),(0,t.jsx)(n.td,{children:"\u274c"}),(0,t.jsx)(n.td,{children:"Ignorado"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"close"})}),(0,t.jsx)(n.td,{children:"\u274c"}),(0,t.jsx)(n.td,{children:"Ignorado (n\xe3o relevante)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"keyUp"})}),(0,t.jsx)(n.td,{children:"\u26a0\ufe0f Parcial"}),(0,t.jsx)(n.td,{children:"Comment (inclu\xeddo em press)"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"recommendations",children:"Recommendations"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Use seletores est\xe1veis"}),": ",(0,t.jsx)(n.code,{children:"data-testid"}),", IDs, aria-labels"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Evite seletores CSS complexos"}),": Podem quebrar com mudan\xe7as"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Review eventos gerados"}),": Ajuste expectativas conforme sua implementa\xe7\xe3o"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Test incrementally"}),": Grave jornadas curtas e combine depois"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"-troubleshooting",children:"\ud83c\udd98 Troubleshooting"}),"\n",(0,t.jsx)(n.h3,{id:"failed-to-detect-recording-format",children:'"Failed to detect recording format"'}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Causa"}),": JSON malformado ou estrutura inv\xe1lida"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Solu\xe7\xe3o"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# Valide seu JSON\ncat recording.json | jq .\n\n# Verifique estrutura m\xednima\n{\n  "title": "...",\n  "steps": [...]\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"recording-must-contain-at-least-one-step",children:'"Recording must contain at least one step"'}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Causa"}),": Array ",(0,t.jsx)(n.code,{children:"steps"})," vazio"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Solu\xe7\xe3o"}),": Certifique-se de gravar pelo menos uma a\xe7\xe3o no recorder."]}),"\n",(0,t.jsx)(n.h3,{id:"events-n\xe3o-detectados-corretamente",children:"Events n\xe3o detectados corretamente"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Causa"}),": Seletores gen\xe9ricos ou falta de contexto"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Solu\xe7\xe3o"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Use template espec\xedfico\nnpx dlest generate --from-recording recording.json --template ecommerce\n\n# Ou ajuste manualmente o teste gerado\n"})}),"\n",(0,t.jsx)(n.h3,{id:"seletores-quebrando",children:"Seletores quebrando"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Causa"}),": Seletores auto-gerados pelo Chrome s\xe3o fr\xe1geis"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Solu\xe7\xe3o"}),": Use atributos ",(0,t.jsx)(n.code,{children:"data-testid"})," no seu HTML:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-html",children:'<button data-testid="add-to-cart">Add to Cart</button>\n'})}),"\n",(0,t.jsx)(n.h2,{id:"-recursos-adicionais",children:"\ud83d\udcda Recursos Adicionais"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://developer.chrome.com/docs/devtools/recorder/",children:"Chrome DevTools Recorder Documentation"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/puppeteer/replay",children:"Puppeteer Replay Format"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/dlest/guides/writing-tests",children:"DLest Test Writing Guide"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/dlest/api/matchers",children:"Analytics Matchers Reference"})}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"-contribuindo",children:"\ud83e\udd1d Contribuindo"}),"\n",(0,t.jsxs)(n.p,{children:["Encontrou um caso de uso n\xe3o suportado? ",(0,t.jsx)(n.a,{href:"https://github.com/metricasboss/dlest/issues",children:"Abra uma issue"})," ou contribua com um PR!"]}),"\n",(0,t.jsx)(n.h2,{id:"-changelog",children:"\ud83d\udcdd Changelog"}),"\n",(0,t.jsx)(n.h3,{id:"v060-unreleased",children:"v0.6.0 (Unreleased)"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u2728 Added Puppeteer Replay format support"}),"\n",(0,t.jsx)(n.li,{children:"\u2728 Automatic format detection"}),"\n",(0,t.jsx)(n.li,{children:"\u2728 50+ new tests for format detection and parsing"}),"\n",(0,t.jsx)(n.li,{children:"\ud83d\udcda Complete documentation and examples"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453(e,n,s){s.d(n,{R:()=>i,x:()=>a});var r=s(6540);const t={},o=r.createContext(t);function i(e){const n=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);