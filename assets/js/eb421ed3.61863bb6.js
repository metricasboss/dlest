"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[9005],{4533(e,t,n){n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"guides/network-validation","title":"Network Request Validation","description":"DLest can intercept and validate actual network requests to analytics platforms, ensuring your implementation sends correct data before it reaches production.","source":"@site/docs/guides/network-validation.md","sourceDirName":"guides","slug":"/guides/network-validation","permalink":"/dlest/guides/network-validation","draft":false,"unlisted":false,"editUrl":"https://github.com/metricasboss/dlest/tree/main/website/docs/guides/network-validation.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Remote Testing","permalink":"/dlest/guides/remote-testing"},"next":{"title":"Templates","permalink":"/dlest/guides/templates"}}');var s=n(4848),a=n(8453);const i={},l="Network Request Validation",d={},o=[{value:"Features",id:"features",level:2},{value:"GA4 Network Validation",id:"ga4-network-validation",level:3},{value:"Universal Analytics Deprecation Detection",id:"universal-analytics-deprecation-detection",level:3},{value:"Usage",id:"usage",level:2},{value:"Basic Network Validation",id:"basic-network-validation",level:3},{value:"Using the GA4 Validator",id:"using-the-ga4-validator",level:3},{value:"Common Validation Errors",id:"common-validation-errors",level:2},{value:"Next Steps",id:"next-steps",level:2}];function c(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"network-request-validation",children:"Network Request Validation"})}),"\n",(0,s.jsx)(t.p,{children:"DLest can intercept and validate actual network requests to analytics platforms, ensuring your implementation sends correct data before it reaches production."}),"\n",(0,s.jsx)(t.h2,{id:"features",children:"Features"}),"\n",(0,s.jsx)(t.h3,{id:"ga4-network-validation",children:"GA4 Network Validation"}),"\n",(0,s.jsx)(t.p,{children:"DLest intercepts requests to Google Analytics 4 and validates:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Event names"}),": Must be \u226440 characters, start with letter, alphanumeric + underscore only"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Parameter limits"}),": Max 25 custom parameters per event"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Parameter names"}),": Must be \u226440 characters"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Parameter values"}),": String values must be \u2264100 characters (\u2264500 for page_location, page_referrer, page_title)"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"User properties"}),": Max 25 user properties"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Item parameters"}),": Max 10 custom parameters per item"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Reserved parameters"}),": Warns when using Google's reserved parameter names"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Measurement ID format"}),": Validates G-XXXXXXXXXX format"]}),"\n"]}),"\n",(0,s.jsx)(t.h3,{id:"universal-analytics-deprecation-detection",children:"Universal Analytics Deprecation Detection"}),"\n",(0,s.jsx)(t.p,{children:"Automatically detects and flags Universal Analytics (UA) implementations as errors since UA was discontinued on July 1, 2023."}),"\n",(0,s.jsx)(t.h2,{id:"usage",children:"Usage"}),"\n",(0,s.jsx)(t.h3,{id:"basic-network-validation",children:"Basic Network Validation"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:"test('validate GA4 implementation', async ({ page, network }) => {\n  await page.goto('https://example.com');\n\n  // Check that event was sent\n  await expect(network).toHaveGA4Event('purchase');\n\n  // Get events for detailed validation\n  const events = network.getGA4Events();\n  const purchaseEvents = network.getGA4EventsByName('purchase');\n});\n"})}),"\n",(0,s.jsx)(t.h3,{id:"using-the-ga4-validator",children:"Using the GA4 Validator"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:"const GA4Validator = require('dlest/validators/ga4-validator');\nconst validator = new GA4Validator({ checkReserved: true });\n\ntest('validate GA4 limits', async ({ page, network }) => {\n  await page.goto('https://example.com');\n\n  const events = network.getGA4Events();\n\n  events.forEach(event => {\n    const validation = validator.validateHit(event);\n\n    if (!validation.valid) {\n      console.log('Errors:', validation.errors);\n      console.log('Warnings:', validation.warnings);\n    }\n  });\n});\n"})}),"\n",(0,s.jsx)(t.h2,{id:"common-validation-errors",children:"Common Validation Errors"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Error Type"}),(0,s.jsx)(t.th,{children:"Description"}),(0,s.jsx)(t.th,{children:"Solution"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"INVALID_EVENT_NAME"})}),(0,s.jsx)(t.td,{children:"Event name > 40 chars or invalid format"}),(0,s.jsx)(t.td,{children:"Shorten name, use only letters, numbers, underscores"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"TOO_MANY_PARAMETERS"})}),(0,s.jsx)(t.td,{children:"More than 25 custom parameters"}),(0,s.jsx)(t.td,{children:"Reduce parameters or use user properties"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"INVALID_PARAMETER_NAME"})}),(0,s.jsx)(t.td,{children:"Parameter name > 40 chars"}),(0,s.jsx)(t.td,{children:"Shorten parameter name"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"INVALID_STRING_VALUE"})}),(0,s.jsx)(t.td,{children:"String value exceeds limit"}),(0,s.jsx)(t.td,{children:"Truncate to 100 chars (500 for page_* params)"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"DEPRECATED_UNIVERSAL_ANALYTICS"})}),(0,s.jsx)(t.td,{children:"Using discontinued UA"}),(0,s.jsx)(t.td,{children:"Migrate to GA4 immediately"})]})]})]}),"\n",(0,s.jsx)(t.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["See ",(0,s.jsx)(t.a,{href:"/advanced/ga4-validation",children:"GA4 validation examples"})]}),"\n",(0,s.jsxs)(t.li,{children:["Learn about ",(0,s.jsx)(t.a,{href:"/guides/remote-testing",children:"remote testing"})]}),"\n",(0,s.jsxs)(t.li,{children:["Explore ",(0,s.jsx)(t.a,{href:"/guides/debugging",children:"debugging techniques"})]}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453(e,t,n){n.d(t,{R:()=>i,x:()=>l});var r=n(6540);const s={},a=r.createContext(s);function i(e){const t=r.useContext(a);return r.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),r.createElement(a.Provider,{value:t},e.children)}}}]);